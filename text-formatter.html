<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Prettifier & Formatter</title>
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #334155;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        .format-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .format-btn {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }
        
        .format-btn:hover {
            border-color: var(--primary);
        }
        
        .format-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .editor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 900px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
        }
        
        .editor-panel {
            display: flex;
            flex-direction: column;
        }
        
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        
        .editor-header h3 {
            font-size: 1rem;
            color: var(--text-muted);
        }
        
        .editor-actions {
            display: flex;
            gap: 8px;
        }
        
        .editor-actions button {
            padding: 6px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        
        .editor-actions button:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        textarea {
            width: 100%;
            height: 500px;
            padding: 15px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .output-display {
            width: 100%;
            height: 500px;
            padding: 15px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-secondary {
            background: var(--border);
            color: var(--text);
        }
        
        .btn-secondary:hover {
            background: #475569;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
            text-decoration: none;
            margin-bottom: 20px;
            transition: color 0.2s;
        }
        
        .back-link:hover {
            color: var(--primary);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: var(--bg);
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .status-bar .status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-bar .status.valid {
            color: var(--success);
        }
        
        .status-bar .status.invalid {
            color: var(--danger);
        }
        
        .status-bar .stats {
            color: var(--text-muted);
        }
        
        .options-panel {
            background: var(--bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .options-panel h3 {
            margin-bottom: 15px;
            font-size: 1rem;
            color: var(--text-muted);
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .option-group label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .option-group select,
        .option-group input {
            padding: 8px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text);
            font-size: 0.9rem;
        }
        
        .option-group select:focus,
        .option-group input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }
        
        /* Syntax highlighting */
        .hl-key { color: #f472b6; }
        .hl-string { color: #a5d6ff; }
        .hl-number { color: #ffa657; }
        .hl-boolean { color: #ff7b72; }
        .hl-null { color: #8b949e; }
        .hl-bracket { color: #7ee787; }
        .hl-comment { color: #8b949e; font-style: italic; }
        .hl-heading { color: #58a6ff; font-weight: bold; }
        .hl-bold { font-weight: bold; }
        .hl-italic { font-style: italic; }
        .hl-code { color: #ffa657; background: rgba(255,166,87,0.1); padding: 2px 4px; border-radius: 3px; }
        .hl-link { color: #58a6ff; text-decoration: underline; }
        .hl-list { color: #7ee787; }
        
        .error-highlight {
            background: rgba(239, 68, 68, 0.2);
            border-left: 3px solid var(--danger);
            display: block;
            padding: 2px 5px;
            margin: 2px 0;
        }
        
        /* Markdown preview */
        .md-preview {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            height: 500px;
            overflow: auto;
            line-height: 1.7;
        }
        
        .md-preview h1 { font-size: 2em; margin: 0.67em 0; border-bottom: 1px solid var(--border); padding-bottom: 0.3em; }
        .md-preview h2 { font-size: 1.5em; margin: 0.83em 0; border-bottom: 1px solid var(--border); padding-bottom: 0.3em; }
        .md-preview h3 { font-size: 1.17em; margin: 1em 0; }
        .md-preview h4, .md-preview h5, .md-preview h6 { margin: 1.33em 0; }
        .md-preview p { margin: 1em 0; }
        .md-preview ul, .md-preview ol { margin: 1em 0; padding-left: 2em; }
        .md-preview li { margin: 0.5em 0; }
        .md-preview code { background: var(--bg-card); padding: 2px 6px; border-radius: 4px; font-family: monospace; }
        .md-preview pre { background: var(--bg-card); padding: 15px; border-radius: 8px; overflow-x: auto; margin: 1em 0; }
        .md-preview pre code { background: none; padding: 0; }
        .md-preview blockquote { border-left: 4px solid var(--primary); padding-left: 15px; margin: 1em 0; color: var(--text-muted); }
        .md-preview a { color: var(--primary); }
        .md-preview hr { border: none; border-top: 1px solid var(--border); margin: 2em 0; }
        .md-preview table { border-collapse: collapse; width: 100%; margin: 1em 0; }
        .md-preview th, .md-preview td { border: 1px solid var(--border); padding: 8px 12px; text-align: left; }
        .md-preview th { background: var(--bg-card); }
        .md-preview img { max-width: 100%; }
        
        .drop-zone {
            border: 2px dashed var(--border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }
        
        .drop-zone:hover, .drop-zone.dragover {
            border-color: var(--primary);
            background: rgba(16, 185, 129, 0.1);
        }
        
        .drop-zone input {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Tools</a>
        
        <header>
            <h1>‚ú® Text Prettifier & Formatter</h1>
            <p>Format, validate, and beautify JSON, YAML, Markdown, XML and more</p>
        </header>
        
        <div class="format-selector">
            <button class="format-btn active" data-format="json">{ } JSON</button>
            <button class="format-btn" data-format="yaml">üìã YAML</button>
            <button class="format-btn" data-format="markdown">üìù Markdown</button>
            <button class="format-btn" data-format="xml">&lt;/&gt; XML</button>
            <button class="format-btn" data-format="html">&lt;html&gt; HTML</button>
            <button class="format-btn" data-format="css">üé® CSS</button>
            <button class="format-btn" data-format="sql">üóÉÔ∏è SQL</button>
            <button class="format-btn" data-format="javascript">üü® JavaScript</button>
            <button class="format-btn" data-format="python">üêç Python</button>
            <button class="format-btn" data-format="go">üîµ Go</button>
        </div>
        
        <div class="card">
            <div class="drop-zone" id="dropZone">
                <p>üìÅ Drop a file here or click to upload</p>
                <input type="file" id="fileInput" accept=".json,.yaml,.yml,.md,.markdown,.xml,.html,.htm,.css,.sql,.js,.mjs,.jsx,.ts,.tsx,.py,.pyw,.go,.txt">
            </div>
            
            <div class="options-panel" id="optionsPanel">
                <h3>‚öôÔ∏è Formatting Options</h3>
                <div class="options-grid" id="optionsGrid">
                    <!-- Options will be populated dynamically -->
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="formatBtn">‚ú® Format / Prettify</button>
                <button class="btn btn-secondary" id="minifyBtn">üóúÔ∏è Minify</button>
                <button class="btn btn-secondary" id="validateBtn">‚úÖ Validate</button>
                <button class="btn btn-secondary" id="convertBtn">üîÑ Convert</button>
            </div>
            
            <div class="editor-container">
                <div class="editor-panel">
                    <div class="editor-header">
                        <h3>üì• Input</h3>
                        <div class="editor-actions">
                            <button id="pasteBtn">üìã Paste</button>
                            <button id="clearBtn">üóëÔ∏è Clear</button>
                            <button id="sampleBtn">üìÑ Sample</button>
                        </div>
                    </div>
                    <textarea id="inputEditor" placeholder="Paste your code here..."></textarea>
                </div>
                
                <div class="editor-panel">
                    <div class="editor-header">
                        <h3>üì§ Output</h3>
                        <div class="editor-actions">
                            <button id="copyBtn">üìã Copy</button>
                            <button id="downloadBtn">üíæ Download</button>
                        </div>
                    </div>
                    <div class="output-display" id="outputDisplay"></div>
                </div>
            </div>
            
            <div class="status-bar">
                <div class="status" id="validationStatus">
                    <span>Ready</span>
                </div>
                <div class="stats" id="stats">
                    Lines: 0 | Characters: 0
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
    <script>
        let currentFormat = 'json';
        
        // Format configurations
        const formatConfig = {
            json: {
                name: 'JSON',
                extension: '.json',
                mimeType: 'application/json',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces', 'Tab'], default: '2 spaces' },
                    { id: 'sortKeys', label: 'Sort Keys', type: 'checkbox', default: false }
                ],
                sample: '{"name":"John Doe","age":30,"email":"john@example.com","address":{"street":"123 Main St","city":"New York","country":"USA"},"hobbies":["reading","gaming","hiking"],"active":true}'
            },
            yaml: {
                name: 'YAML',
                extension: '.yaml',
                mimeType: 'text/yaml',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces'], default: '2 spaces' },
                    { id: 'flowLevel', label: 'Flow Level', type: 'select', options: ['Block', 'Flow (-1)', 'Mixed'], default: 'Block' }
                ],
                sample: 'name: John Doe\nage: 30\nemail: john@example.com\naddress:\n  street: 123 Main St\n  city: New York\nhobbies:\n  - reading\n  - gaming'
            },
            markdown: {
                name: 'Markdown',
                extension: '.md',
                mimeType: 'text/markdown',
                options: [
                    { id: 'preview', label: 'Show Preview', type: 'checkbox', default: true }
                ],
                sample: '# Hello World\n\nThis is a **markdown** document with _formatting_.\n\n## Features\n\n- List item 1\n- List item 2\n- List item 3\n\n### Code Example\n\n```javascript\nconst hello = "world";\nconsole.log(hello);\n```\n\n> This is a blockquote\n\n[Link to Google](https://google.com)'
            },
            xml: {
                name: 'XML',
                extension: '.xml',
                mimeType: 'application/xml',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces', 'Tab'], default: '2 spaces' }
                ],
                sample: '<?xml version="1.0"?><catalog><book id="1"><title>XML Guide</title><author>John</author><price>29.99</price></book><book id="2"><title>JSON vs XML</title><author>Jane</author><price>39.99</price></book></catalog>'
            },
            html: {
                name: 'HTML',
                extension: '.html',
                mimeType: 'text/html',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces', 'Tab'], default: '2 spaces' }
                ],
                sample: '<!DOCTYPE html><html><head><title>Test</title><style>body{margin:0;}</style></head><body><div class="container"><h1>Hello</h1><p>World</p></div></body></html>'
            },
            css: {
                name: 'CSS',
                extension: '.css',
                mimeType: 'text/css',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces', 'Tab'], default: '2 spaces' }
                ],
                sample: '.container{max-width:1200px;margin:0 auto;padding:20px}.header{background:#333;color:#fff;padding:15px}.btn{display:inline-block;padding:10px 20px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.btn:hover{background:#0056b3}'
            },
            sql: {
                name: 'SQL',
                extension: '.sql',
                mimeType: 'text/plain',
                options: [
                    { id: 'uppercase', label: 'Uppercase Keywords', type: 'checkbox', default: true },
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces'], default: '2 spaces' }
                ],
                sample: 'select u.id, u.name, u.email, o.order_id, o.total from users u inner join orders o on u.id = o.user_id where u.active = 1 and o.created_at > "2024-01-01" order by o.total desc limit 10'
            },
            javascript: {
                name: 'JavaScript',
                extension: '.js',
                mimeType: 'text/javascript',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces', 'Tab'], default: '2 spaces' },
                    { id: 'semicolons', label: 'Add Semicolons', type: 'checkbox', default: true },
                    { id: 'singleQuotes', label: 'Single Quotes', type: 'checkbox', default: false }
                ],
                sample: 'const greet=(name)=>{console.log("Hello, "+name+"!");return{message:"Hello",name:name}};function processData(data){if(!data){return null}const result=data.map(item=>item.value*2);return result.filter(x=>x>10)}'
            },
            python: {
                name: 'Python',
                extension: '.py',
                mimeType: 'text/x-python',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['2 spaces', '4 spaces'], default: '4 spaces' },
                    { id: 'sortImports', label: 'Sort Imports', type: 'checkbox', default: true }
                ],
                sample: 'import sys\nimport os\ndef greet(name):print(f"Hello, {name}!");return {"message":"Hello","name":name}\nclass Calculator:\n def __init__(self):self.value=0\n def add(self,x):self.value+=x;return self\n def subtract(self,x):self.value-=x;return self'
            },
            go: {
                name: 'Go',
                extension: '.go',
                mimeType: 'text/x-go',
                options: [
                    { id: 'indent', label: 'Indentation', type: 'select', options: ['Tab', '4 spaces'], default: 'Tab' }
                ],
                sample: 'package main\nimport "fmt"\nfunc main(){fmt.Println("Hello, World!");numbers:=[]int{1,2,3,4,5};for _,n:=range numbers{fmt.Printf("Number: %d\\n",n)}}\nfunc add(a,b int)int{return a+b}'
            }
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupFormatButtons();
            setupButtons();
            setupDropZone();
            updateOptions();
            
            document.getElementById('inputEditor').addEventListener('input', updateStats);
        });
        
        function setupFormatButtons() {
            document.querySelectorAll('.format-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.format-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFormat = btn.dataset.format;
                    updateOptions();
                    clearOutput();
                });
            });
        }
        
        function setupButtons() {
            document.getElementById('formatBtn').addEventListener('click', formatCode);
            document.getElementById('minifyBtn').addEventListener('click', minifyCode);
            document.getElementById('validateBtn').addEventListener('click', validateCode);
            document.getElementById('convertBtn').addEventListener('click', showConvertOptions);
            document.getElementById('pasteBtn').addEventListener('click', pasteFromClipboard);
            document.getElementById('clearBtn').addEventListener('click', clearAll);
            document.getElementById('sampleBtn').addEventListener('click', loadSample);
            document.getElementById('copyBtn').addEventListener('click', copyOutput);
            document.getElementById('downloadBtn').addEventListener('click', downloadOutput);
        }
        
        function setupDropZone() {
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('dragover');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if (file) loadFile(file);
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files[0]) loadFile(e.target.files[0]);
            });
        }
        
        function loadFile(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('inputEditor').value = e.target.result;
                updateStats();
                
                // Auto-detect format
                const ext = file.name.split('.').pop().toLowerCase();
                const formatMap = {
                    json: 'json', yaml: 'yaml', yml: 'yaml', md: 'markdown', 
                    markdown: 'markdown', xml: 'xml', html: 'html', htm: 'html',
                    css: 'css', sql: 'sql', js: 'javascript', mjs: 'javascript',
                    jsx: 'javascript', ts: 'javascript', tsx: 'javascript',
                    py: 'python', pyw: 'python', go: 'go'
                };
                if (formatMap[ext]) {
                    currentFormat = formatMap[ext];
                    document.querySelectorAll('.format-btn').forEach(b => {
                        b.classList.toggle('active', b.dataset.format === currentFormat);
                    });
                    updateOptions();
                }
            };
            reader.readAsText(file);
        }
        
        function updateOptions() {
            const config = formatConfig[currentFormat];
            const grid = document.getElementById('optionsGrid');
            
            grid.innerHTML = config.options.map(opt => {
                if (opt.type === 'select') {
                    return `
                        <div class="option-group">
                            <label>${opt.label}</label>
                            <select id="opt-${opt.id}">
                                ${opt.options.map(o => `<option ${o === opt.default ? 'selected' : ''}>${o}</option>`).join('')}
                            </select>
                        </div>
                    `;
                } else if (opt.type === 'checkbox') {
                    return `
                        <div class="option-group">
                            <label class="checkbox-option">
                                <input type="checkbox" id="opt-${opt.id}" ${opt.default ? 'checked' : ''}>
                                ${opt.label}
                            </label>
                        </div>
                    `;
                }
            }).join('');
        }
        
        function getIndent() {
            const indentEl = document.getElementById('opt-indent');
            if (!indentEl) return '  ';
            const val = indentEl.value;
            if (val === 'Tab') return '\t';
            if (val === '4 spaces') return '    ';
            return '  ';
        }
        
        function formatCode() {
            const input = document.getElementById('inputEditor').value.trim();
            if (!input) return;
            
            try {
                let output = '';
                const indent = getIndent();
                
                switch (currentFormat) {
                    case 'json':
                        const parsed = JSON.parse(input);
                        const sortKeys = document.getElementById('opt-sortKeys')?.checked;
                        if (sortKeys) {
                            output = JSON.stringify(sortObject(parsed), null, indent);
                        } else {
                            output = JSON.stringify(parsed, null, indent);
                        }
                        break;
                        
                    case 'yaml':
                        const yamlObj = jsyaml.load(input);
                        output = jsyaml.dump(yamlObj, { indent: indent.length });
                        break;
                        
                    case 'markdown':
                        output = input;
                        if (document.getElementById('opt-preview')?.checked) {
                            const outputEl = document.getElementById('outputDisplay');
                            outputEl.className = 'md-preview';
                            outputEl.innerHTML = marked.parse(input);
                            setStatus('valid', 'Markdown rendered');
                            return;
                        }
                        break;
                        
                    case 'xml':
                    case 'html':
                        output = formatXML(input, indent);
                        break;
                        
                    case 'css':
                        output = formatCSS(input, indent);
                        break;
                        
                    case 'sql':
                        output = formatSQL(input);
                        break;
                        
                    case 'javascript':
                        output = formatJavaScript(input, indent);
                        break;
                        
                    case 'python':
                        output = formatPython(input, indent);
                        break;
                        
                    case 'go':
                        output = formatGo(input, indent);
                        break;
                }
                
                displayOutput(output);
                setStatus('valid', 'Formatted successfully');
            } catch (error) {
                setStatus('invalid', 'Error: ' + error.message);
                displayError(error);
            }
        }
        
        function minifyCode() {
            const input = document.getElementById('inputEditor').value.trim();
            if (!input) return;
            
            try {
                let output = '';
                
                switch (currentFormat) {
                    case 'json':
                        output = JSON.stringify(JSON.parse(input));
                        break;
                        
                    case 'yaml':
                        const yamlObj = jsyaml.load(input);
                        output = JSON.stringify(yamlObj);
                        break;
                        
                    case 'xml':
                    case 'html':
                        output = input.replace(/>\s+</g, '><').replace(/\s+/g, ' ').trim();
                        break;
                        
                    case 'css':
                        output = input
                            .replace(/\/\*[\s\S]*?\*\//g, '')
                            .replace(/\s+/g, ' ')
                            .replace(/\s*([{}:;,])\s*/g, '$1')
                            .replace(/;}/g, '}')
                            .trim();
                        break;
                        
                    case 'sql':
                        output = input.replace(/\s+/g, ' ').trim();
                        break;
                        
                    case 'javascript':
                        output = minifyJavaScript(input);
                        break;
                        
                    case 'python':
                        // Python can't be safely minified due to indentation significance
                        output = input.split('\n').map(line => line.trimEnd()).filter(line => line.length > 0).join('\n');
                        break;
                        
                    case 'go':
                        output = minifyGo(input);
                        break;
                        
                    default:
                        output = input.replace(/\s+/g, ' ').trim();
                }
                
                displayOutput(output);
                setStatus('valid', 'Minified successfully');
            } catch (error) {
                setStatus('invalid', 'Error: ' + error.message);
            }
        }
        
        function validateCode() {
            const input = document.getElementById('inputEditor').value.trim();
            if (!input) return;
            
            try {
                switch (currentFormat) {
                    case 'json':
                        JSON.parse(input);
                        break;
                        
                    case 'yaml':
                        jsyaml.load(input);
                        break;
                        
                    case 'xml':
                    case 'html':
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(input, currentFormat === 'xml' ? 'application/xml' : 'text/html');
                        const parseError = doc.querySelector('parsererror');
                        if (parseError && currentFormat === 'xml') {
                            throw new Error(parseError.textContent);
                        }
                        break;
                        
                    default:
                        // For formats without strict validation, just confirm
                        break;
                }
                
                setStatus('valid', '‚úì Valid ' + formatConfig[currentFormat].name);
                document.getElementById('outputDisplay').textContent = '‚úÖ The ' + formatConfig[currentFormat].name + ' is valid!';
            } catch (error) {
                setStatus('invalid', '‚úó Invalid: ' + error.message);
                displayError(error);
            }
        }
        
        function showConvertOptions() {
            const input = document.getElementById('inputEditor').value.trim();
            if (!input) return;
            
            const conversions = {
                json: ['yaml'],
                yaml: ['json'],
                markdown: ['html'],
                xml: ['json']
            };
            
            const available = conversions[currentFormat];
            if (!available) {
                alert('No conversion available for ' + formatConfig[currentFormat].name);
                return;
            }
            
            const target = available[0]; // For simplicity, just use first option
            
            try {
                let output = '';
                
                if (currentFormat === 'json' && target === 'yaml') {
                    const obj = JSON.parse(input);
                    output = jsyaml.dump(obj);
                } else if (currentFormat === 'yaml' && target === 'json') {
                    const obj = jsyaml.load(input);
                    output = JSON.stringify(obj, null, 2);
                } else if (currentFormat === 'markdown' && target === 'html') {
                    output = marked.parse(input);
                } else if (currentFormat === 'xml' && target === 'json') {
                    output = xmlToJson(input);
                }
                
                displayOutput(output);
                setStatus('valid', `Converted to ${formatConfig[target]?.name || target.toUpperCase()}`);
            } catch (error) {
                setStatus('invalid', 'Conversion error: ' + error.message);
            }
        }
        
        // Helper functions
        function sortObject(obj) {
            if (Array.isArray(obj)) {
                return obj.map(sortObject);
            } else if (obj !== null && typeof obj === 'object') {
                return Object.keys(obj).sort().reduce((result, key) => {
                    result[key] = sortObject(obj[key]);
                    return result;
                }, {});
            }
            return obj;
        }
        
        function formatXML(xml, indent) {
            let formatted = '';
            let pad = 0;
            const lines = xml.replace(/(>)(<)(\/*)/g, '$1\n$2$3').split('\n');
            
            lines.forEach(line => {
                line = line.trim();
                if (!line) return;
                
                let padding = '';
                if (line.match(/^<\/\w/)) {
                    pad--;
                }
                for (let i = 0; i < pad; i++) {
                    padding += indent;
                }
                
                formatted += padding + line + '\n';
                
                if (line.match(/^<\w[^>]*[^\/]>.*$/)) {
                    pad++;
                }
            });
            
            return formatted.trim();
        }
        
        function formatCSS(css, indent) {
            return css
                .replace(/\s*{\s*/g, ' {\n' + indent)
                .replace(/\s*}\s*/g, '\n}\n\n')
                .replace(/;\s*/g, ';\n' + indent)
                .replace(new RegExp(indent + '}', 'g'), '}')
                .replace(/\n\n+/g, '\n\n')
                .trim();
        }
        
        function formatSQL(sql) {
            const uppercase = document.getElementById('opt-uppercase')?.checked;
            const indent = getIndent();
            
            const keywords = ['SELECT', 'FROM', 'WHERE', 'AND', 'OR', 'ORDER BY', 'GROUP BY', 
                            'HAVING', 'LIMIT', 'OFFSET', 'JOIN', 'LEFT JOIN', 'RIGHT JOIN', 
                            'INNER JOIN', 'OUTER JOIN', 'ON', 'AS', 'INSERT', 'INTO', 'VALUES',
                            'UPDATE', 'SET', 'DELETE', 'CREATE', 'TABLE', 'INDEX', 'VIEW',
                            'DROP', 'ALTER', 'ADD', 'COLUMN', 'PRIMARY KEY', 'FOREIGN KEY',
                            'REFERENCES', 'NOT NULL', 'DEFAULT', 'UNIQUE', 'CHECK', 'CONSTRAINT'];
            
            let formatted = sql;
            
            // Uppercase keywords
            if (uppercase) {
                keywords.forEach(kw => {
                    const regex = new RegExp('\\b' + kw.replace(/ /g, '\\s+') + '\\b', 'gi');
                    formatted = formatted.replace(regex, kw);
                });
            }
            
            // Add newlines before major keywords
            const breakBefore = ['SELECT', 'FROM', 'WHERE', 'AND', 'OR', 'ORDER BY', 'GROUP BY', 
                                'HAVING', 'LIMIT', 'JOIN', 'LEFT JOIN', 'RIGHT JOIN', 'INNER JOIN'];
            
            breakBefore.forEach(kw => {
                const regex = new RegExp('\\s+(' + kw.replace(/ /g, '\\s+') + ')\\b', 'gi');
                formatted = formatted.replace(regex, '\n$1');
            });
            
            // Indent continuation lines
            const lines = formatted.split('\n');
            formatted = lines.map((line, i) => {
                if (i === 0) return line.trim();
                if (line.match(/^(AND|OR)\b/i)) return indent + line.trim();
                return line.trim();
            }).join('\n');
            
            return formatted;
        }
        
        // ==================== JAVASCRIPT FORMATTER ====================
        function formatJavaScript(code, indent) {
            const addSemicolons = document.getElementById('opt-semicolons')?.checked ?? true;
            const singleQuotes = document.getElementById('opt-singleQuotes')?.checked ?? false;
            
            let formatted = '';
            let indentLevel = 0;
            let inString = false;
            let stringChar = '';
            let inComment = false;
            let inMultilineComment = false;
            
            // First, normalize the code
            code = code.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            
            // Add spaces around operators and format
            let i = 0;
            while (i < code.length) {
                const char = code[i];
                const nextChar = code[i + 1] || '';
                const prevChar = formatted[formatted.length - 1] || '';
                
                // Handle strings
                if (!inComment && !inMultilineComment && (char === '"' || char === "'" || char === '`')) {
                    if (!inString) {
                        inString = true;
                        stringChar = char;
                    } else if (char === stringChar && code[i - 1] !== '\\') {
                        inString = false;
                    }
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (inString) {
                    formatted += char;
                    i++;
                    continue;
                }
                
                // Handle comments
                if (char === '/' && nextChar === '/') {
                    inComment = true;
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (char === '/' && nextChar === '*') {
                    inMultilineComment = true;
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (inMultilineComment && char === '*' && nextChar === '/') {
                    inMultilineComment = false;
                    formatted += '*/';
                    i += 2;
                    continue;
                }
                
                if (char === '\n' && inComment) {
                    inComment = false;
                }
                
                if (inComment || inMultilineComment) {
                    formatted += char;
                    i++;
                    continue;
                }
                
                // Handle braces
                if (char === '{') {
                    formatted = formatted.trimEnd() + ' {\n' + indent.repeat(indentLevel + 1);
                    indentLevel++;
                    i++;
                    continue;
                }
                
                if (char === '}') {
                    indentLevel = Math.max(0, indentLevel - 1);
                    formatted = formatted.trimEnd() + '\n' + indent.repeat(indentLevel) + '}';
                    i++;
                    continue;
                }
                
                // Handle semicolons
                if (char === ';') {
                    formatted = formatted.trimEnd() + ';\n' + indent.repeat(indentLevel);
                    i++;
                    continue;
                }
                
                // Handle newlines
                if (char === '\n') {
                    if (prevChar !== '\n' && prevChar !== '{') {
                        formatted += '\n' + indent.repeat(indentLevel);
                    }
                    i++;
                    continue;
                }
                
                // Skip extra whitespace
                if (char === ' ' || char === '\t') {
                    if (prevChar !== ' ' && prevChar !== '\n' && prevChar !== '(' && prevChar !== '[') {
                        formatted += ' ';
                    }
                    i++;
                    continue;
                }
                
                formatted += char;
                i++;
            }
            
            // Clean up
            formatted = formatted
                .replace(/\n\s*\n\s*\n/g, '\n\n')  // Max 2 newlines
                .replace(/{\s+}/g, '{}')  // Empty blocks
                .replace(/\(\s+/g, '(')  // Space after (
                .replace(/\s+\)/g, ')')  // Space before )
                .trim();
            
            // Convert quotes if needed
            if (singleQuotes) {
                formatted = formatted.replace(/"([^"\\]*(\\.[^"\\]*)*)"/g, "'$1'");
            }
            
            return formatted;
        }
        
        function minifyJavaScript(code) {
            // Remove comments
            code = code.replace(/\/\/.*$/gm, '');
            code = code.replace(/\/\*[\s\S]*?\*\//g, '');
            
            // Remove extra whitespace while preserving strings
            let result = '';
            let inString = false;
            let stringChar = '';
            
            for (let i = 0; i < code.length; i++) {
                const char = code[i];
                
                if (!inString && (char === '"' || char === "'" || char === '`')) {
                    inString = true;
                    stringChar = char;
                    result += char;
                } else if (inString && char === stringChar && code[i-1] !== '\\') {
                    inString = false;
                    result += char;
                } else if (inString) {
                    result += char;
                } else if (/\s/.test(char)) {
                    const prev = result[result.length - 1];
                    const next = code[i + 1];
                    // Keep space if between alphanumeric chars
                    if (/[a-zA-Z0-9_$]/.test(prev) && /[a-zA-Z0-9_$]/.test(next)) {
                        result += ' ';
                    }
                } else {
                    result += char;
                }
            }
            
            return result.trim();
        }
        
        // ==================== PYTHON FORMATTER ====================
        function formatPython(code, indent) {
            const sortImports = document.getElementById('opt-sortImports')?.checked ?? true;
            
            let lines = code.split('\n');
            let formatted = [];
            let currentIndent = 0;
            
            // Extract imports for sorting
            let imports = [];
            let fromImports = [];
            let otherLines = [];
            let seenNonImport = false;
            
            for (let line of lines) {
                const trimmed = line.trim();
                
                if (!seenNonImport && trimmed.startsWith('import ')) {
                    imports.push(trimmed);
                } else if (!seenNonImport && trimmed.startsWith('from ')) {
                    fromImports.push(trimmed);
                } else {
                    if (trimmed.length > 0 && !trimmed.startsWith('#')) {
                        seenNonImport = true;
                    }
                    otherLines.push(line);
                }
            }
            
            // Sort imports if requested
            if (sortImports) {
                imports.sort();
                fromImports.sort();
            }
            
            // Reconstruct with sorted imports
            if (imports.length > 0 || fromImports.length > 0) {
                formatted = [...imports, ...fromImports, ''];
            }
            
            // Process other lines
            for (let line of otherLines) {
                const trimmed = line.trim();
                
                if (trimmed.length === 0) {
                    formatted.push('');
                    continue;
                }
                
                // Decrease indent for these keywords
                if (trimmed.match(/^(elif|else|except|finally)\b/)) {
                    currentIndent = Math.max(0, currentIndent - 1);
                }
                
                // Check for inline statements that should be split
                // e.g., "def foo():print('hi')" -> split to multiple lines
                const colonMatch = trimmed.match(/^(def |class |if |elif |else:|for |while |try:|except|with )(.+?):(.+)$/);
                if (colonMatch && !colonMatch[3].startsWith('#')) {
                    formatted.push(indent.repeat(currentIndent) + colonMatch[1] + colonMatch[2] + ':');
                    currentIndent++;
                    // Split multiple statements
                    const statements = colonMatch[3].split(';');
                    for (const stmt of statements) {
                        if (stmt.trim()) {
                            formatted.push(indent.repeat(currentIndent) + stmt.trim());
                        }
                    }
                } else {
                    formatted.push(indent.repeat(currentIndent) + trimmed);
                    
                    // Increase indent after these
                    if (trimmed.endsWith(':') && !trimmed.startsWith('#')) {
                        currentIndent++;
                    }
                }
                
                // Handle return, break, continue, pass - they end a block conceptually
                if (trimmed.match(/^(return|break|continue|pass|raise)\b/)) {
                    // Don't auto-decrease, let the next line handle it
                }
            }
            
            // Clean up multiple blank lines
            let result = [];
            let blankCount = 0;
            for (const line of formatted) {
                if (line.trim() === '') {
                    blankCount++;
                    if (blankCount <= 2) {
                        result.push('');
                    }
                } else {
                    blankCount = 0;
                    result.push(line);
                }
            }
            
            return result.join('\n').trim();
        }
        
        // ==================== GO FORMATTER ====================
        function formatGo(code, indent) {
            let formatted = '';
            let indentLevel = 0;
            let inString = false;
            let stringChar = '';
            let inComment = false;
            let inMultilineComment = false;
            
            code = code.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            
            let i = 0;
            while (i < code.length) {
                const char = code[i];
                const nextChar = code[i + 1] || '';
                const prevChar = formatted[formatted.length - 1] || '';
                
                // Handle strings
                if (!inComment && !inMultilineComment && (char === '"' || char === '`')) {
                    if (!inString) {
                        inString = true;
                        stringChar = char;
                    } else if (char === stringChar && code[i - 1] !== '\\') {
                        inString = false;
                    }
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (inString) {
                    formatted += char;
                    i++;
                    continue;
                }
                
                // Handle comments
                if (char === '/' && nextChar === '/') {
                    inComment = true;
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (char === '/' && nextChar === '*') {
                    inMultilineComment = true;
                    formatted += char;
                    i++;
                    continue;
                }
                
                if (inMultilineComment && char === '*' && nextChar === '/') {
                    inMultilineComment = false;
                    formatted += '*/';
                    i += 2;
                    continue;
                }
                
                if (char === '\n' && inComment) {
                    inComment = false;
                }
                
                if (inComment || inMultilineComment) {
                    formatted += char;
                    i++;
                    continue;
                }
                
                // Handle braces
                if (char === '{') {
                    formatted = formatted.trimEnd() + ' {\n' + indent.repeat(indentLevel + 1);
                    indentLevel++;
                    i++;
                    continue;
                }
                
                if (char === '}') {
                    indentLevel = Math.max(0, indentLevel - 1);
                    formatted = formatted.trimEnd() + '\n' + indent.repeat(indentLevel) + '}';
                    i++;
                    continue;
                }
                
                // Handle semicolons (Go uses them implicitly)
                if (char === ';') {
                    formatted = formatted.trimEnd() + '\n' + indent.repeat(indentLevel);
                    i++;
                    continue;
                }
                
                // Handle newlines
                if (char === '\n') {
                    formatted += '\n' + indent.repeat(indentLevel);
                    i++;
                    continue;
                }
                
                // Skip extra whitespace
                if (char === ' ' || char === '\t') {
                    if (prevChar !== ' ' && prevChar !== '\n' && prevChar !== '(' && prevChar !== '[') {
                        formatted += ' ';
                    }
                    i++;
                    continue;
                }
                
                formatted += char;
                i++;
            }
            
            // Clean up and add blank lines between top-level declarations
            formatted = formatted
                .replace(/\n\s*\n\s*\n/g, '\n\n')
                .replace(/}\s*func /g, '}\n\nfunc ')
                .replace(/}\s*type /g, '}\n\ntype ')
                .trim();
            
            return formatted;
        }
        
        function minifyGo(code) {
            // Remove comments
            code = code.replace(/\/\/.*$/gm, '');
            code = code.replace(/\/\*[\s\S]*?\*\//g, '');
            
            // Replace newlines with semicolons where needed
            let result = '';
            let inString = false;
            let stringChar = '';
            
            const lines = code.split('\n');
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    if (result && !result.endsWith('{') && !result.endsWith('(') && 
                        !line.startsWith('}') && !line.startsWith(')')) {
                        result += ';';
                    }
                    result += line;
                }
            }
            
            // Clean up extra semicolons
            result = result.replace(/;+/g, ';').replace(/;}/g, '}').replace(/{;/g, '{');
            
            return result.trim();
        }
        
        function xmlToJson(xml) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(xml, 'application/xml');
            
            function nodeToObj(node) {
                const obj = {};
                
                if (node.attributes) {
                    for (let i = 0; i < node.attributes.length; i++) {
                        const attr = node.attributes[i];
                        obj['@' + attr.name] = attr.value;
                    }
                }
                
                for (let i = 0; i < node.childNodes.length; i++) {
                    const child = node.childNodes[i];
                    if (child.nodeType === 1) {
                        const childObj = nodeToObj(child);
                        if (obj[child.nodeName]) {
                            if (!Array.isArray(obj[child.nodeName])) {
                                obj[child.nodeName] = [obj[child.nodeName]];
                            }
                            obj[child.nodeName].push(childObj);
                        } else {
                            obj[child.nodeName] = childObj;
                        }
                    } else if (child.nodeType === 3) {
                        const text = child.textContent.trim();
                        if (text) {
                            obj['#text'] = text;
                        }
                    }
                }
                
                // Simplify if only text content
                if (Object.keys(obj).length === 1 && obj['#text']) {
                    return obj['#text'];
                }
                
                return obj;
            }
            
            const result = {};
            result[doc.documentElement.nodeName] = nodeToObj(doc.documentElement);
            return JSON.stringify(result, null, 2);
        }
        
        function displayOutput(text) {
            const outputEl = document.getElementById('outputDisplay');
            outputEl.className = 'output-display';
            
            // Apply syntax highlighting
            let highlighted = escapeHtml(text);
            
            if (currentFormat === 'json') {
                highlighted = highlightJSON(highlighted);
            } else if (currentFormat === 'yaml') {
                highlighted = highlightYAML(highlighted);
            } else if (currentFormat === 'javascript') {
                highlighted = highlightJavaScript(highlighted);
            } else if (currentFormat === 'python') {
                highlighted = highlightPython(highlighted);
            } else if (currentFormat === 'go') {
                highlighted = highlightGo(highlighted);
            }
            
            outputEl.innerHTML = highlighted;
        }
        
        function displayError(error) {
            const outputEl = document.getElementById('outputDisplay');
            outputEl.className = 'output-display';
            outputEl.innerHTML = `<span class="error-highlight">‚ùå ${escapeHtml(error.message)}</span>`;
        }
        
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
        }
        
        function highlightJSON(text) {
            return text
                .replace(/"([^"]+)":/g, '<span class="hl-key">"$1"</span>:')
                .replace(/: "([^"]*)"/g, ': <span class="hl-string">"$1"</span>')
                .replace(/: (-?\d+\.?\d*)/g, ': <span class="hl-number">$1</span>')
                .replace(/: (true|false)/g, ': <span class="hl-boolean">$1</span>')
                .replace(/: (null)/g, ': <span class="hl-null">$1</span>')
                .replace(/([[\]{}])/g, '<span class="hl-bracket">$1</span>');
        }
        
        function highlightYAML(text) {
            return text
                .replace(/^(\s*)([^:\n]+):/gm, '$1<span class="hl-key">$2</span>:')
                .replace(/#.*/g, '<span class="hl-comment">$&</span>')
                .replace(/: (true|false|yes|no)$/gm, ': <span class="hl-boolean">$1</span>')
                .replace(/: (-?\d+\.?\d*)$/gm, ': <span class="hl-number">$1</span>')
                .replace(/: (null|~)$/gm, ': <span class="hl-null">$1</span>');
        }
        
        function highlightJavaScript(text) {
            const keywords = ['const', 'let', 'var', 'function', 'return', 'if', 'else', 'for', 'while', 
                            'do', 'switch', 'case', 'break', 'continue', 'try', 'catch', 'finally', 
                            'throw', 'class', 'extends', 'new', 'this', 'super', 'import', 'export', 
                            'default', 'from', 'async', 'await', 'yield', 'typeof', 'instanceof', 
                            'in', 'of', 'delete', 'void', 'static', 'get', 'set'];
            
            let result = text;
            
            // Comments
            result = result.replace(/(\/\/.*$)/gm, '<span class="hl-comment">$1</span>');
            result = result.replace(/(\/\*[\s\S]*?\*\/)/g, '<span class="hl-comment">$1</span>');
            
            // Strings
            result = result.replace(/("(?:[^"\\]|\\.)*")/g, '<span class="hl-string">$1</span>');
            result = result.replace(/('(?:[^'\\]|\\.)*')/g, '<span class="hl-string">$1</span>');
            result = result.replace(/(`(?:[^`\\]|\\.)*`)/g, '<span class="hl-string">$1</span>');
            
            // Keywords
            keywords.forEach(kw => {
                result = result.replace(new RegExp('\\b(' + kw + ')\\b', 'g'), '<span class="hl-key">$1</span>');
            });
            
            // Numbers
            result = result.replace(/\b(-?\d+\.?\d*)\b/g, '<span class="hl-number">$1</span>');
            
            // Booleans
            result = result.replace(/\b(true|false|null|undefined|NaN|Infinity)\b/g, '<span class="hl-boolean">$1</span>');
            
            return result;
        }
        
        function highlightPython(text) {
            const keywords = ['def', 'class', 'if', 'elif', 'else', 'for', 'while', 'try', 'except', 
                            'finally', 'with', 'as', 'import', 'from', 'return', 'yield', 'raise', 
                            'pass', 'break', 'continue', 'lambda', 'and', 'or', 'not', 'in', 'is', 
                            'global', 'nonlocal', 'assert', 'del', 'async', 'await'];
            
            let result = text;
            
            // Comments
            result = result.replace(/(#.*$)/gm, '<span class="hl-comment">$1</span>');
            
            // Docstrings / Multi-line strings
            result = result.replace(/("""[\s\S]*?""")/g, '<span class="hl-string">$1</span>');
            result = result.replace(/('''[\s\S]*?''')/g, '<span class="hl-string">$1</span>');
            
            // Strings
            result = result.replace(/("(?:[^"\\]|\\.)*")/g, '<span class="hl-string">$1</span>');
            result = result.replace(/('(?:[^'\\]|\\.)*')/g, '<span class="hl-string">$1</span>');
            result = result.replace(/(f"(?:[^"\\]|\\.)*")/g, '<span class="hl-string">$1</span>');
            result = result.replace(/(f'(?:[^'\\]|\\.)*')/g, '<span class="hl-string">$1</span>');
            
            // Keywords
            keywords.forEach(kw => {
                result = result.replace(new RegExp('\\b(' + kw + ')\\b', 'g'), '<span class="hl-key">$1</span>');
            });
            
            // Numbers
            result = result.replace(/\b(-?\d+\.?\d*)\b/g, '<span class="hl-number">$1</span>');
            
            // Booleans and None
            result = result.replace(/\b(True|False|None)\b/g, '<span class="hl-boolean">$1</span>');
            
            // Decorators
            result = result.replace(/(@\w+)/g, '<span class="hl-key">$1</span>');
            
            return result;
        }
        
        function highlightGo(text) {
            const keywords = ['func', 'var', 'const', 'type', 'struct', 'interface', 'map', 'chan',
                            'if', 'else', 'for', 'range', 'switch', 'case', 'default', 'break', 
                            'continue', 'return', 'go', 'defer', 'select', 'fallthrough', 'goto',
                            'package', 'import', 'make', 'new', 'len', 'cap', 'append', 'copy',
                            'delete', 'panic', 'recover'];
            
            let result = text;
            
            // Comments
            result = result.replace(/(\/\/.*$)/gm, '<span class="hl-comment">$1</span>');
            result = result.replace(/(\/\*[\s\S]*?\*\/)/g, '<span class="hl-comment">$1</span>');
            
            // Strings
            result = result.replace(/("(?:[^"\\]|\\.)*")/g, '<span class="hl-string">$1</span>');
            result = result.replace(/(`[^`]*`)/g, '<span class="hl-string">$1</span>');
            
            // Keywords
            keywords.forEach(kw => {
                result = result.replace(new RegExp('\\b(' + kw + ')\\b', 'g'), '<span class="hl-key">$1</span>');
            });
            
            // Types
            const types = ['int', 'int8', 'int16', 'int32', 'int64', 'uint', 'uint8', 'uint16', 
                          'uint32', 'uint64', 'float32', 'float64', 'complex64', 'complex128',
                          'bool', 'string', 'byte', 'rune', 'error', 'any'];
            types.forEach(t => {
                result = result.replace(new RegExp('\\b(' + t + ')\\b', 'g'), '<span class="hl-null">$1</span>');
            });
            
            // Numbers
            result = result.replace(/\b(-?\d+\.?\d*)\b/g, '<span class="hl-number">$1</span>');
            
            // Booleans
            result = result.replace(/\b(true|false|nil)\b/g, '<span class="hl-boolean">$1</span>');
            
            return result;
        }
        
        function setStatus(type, message) {
            const statusEl = document.getElementById('validationStatus');
            statusEl.className = 'status ' + type;
            statusEl.innerHTML = message;
        }
        
        function updateStats() {
            const input = document.getElementById('inputEditor').value;
            const lines = input.split('\n').length;
            const chars = input.length;
            document.getElementById('stats').textContent = `Lines: ${lines} | Characters: ${chars}`;
        }
        
        function clearOutput() {
            document.getElementById('outputDisplay').innerHTML = '';
            document.getElementById('outputDisplay').className = 'output-display';
            setStatus('', 'Ready');
        }
        
        function clearAll() {
            document.getElementById('inputEditor').value = '';
            clearOutput();
            updateStats();
        }
        
        function loadSample() {
            document.getElementById('inputEditor').value = formatConfig[currentFormat].sample;
            updateStats();
        }
        
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('inputEditor').value = text;
                updateStats();
            } catch (error) {
                alert('Unable to read from clipboard. Please paste manually.');
            }
        }
        
        async function copyOutput() {
            const outputEl = document.getElementById('outputDisplay');
            const text = outputEl.innerText || outputEl.textContent;
            
            try {
                await navigator.clipboard.writeText(text);
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            } catch (error) {
                alert('Unable to copy. Please select and copy manually.');
            }
        }
        
        function downloadOutput() {
            const outputEl = document.getElementById('outputDisplay');
            const text = outputEl.innerText || outputEl.textContent;
            const config = formatConfig[currentFormat];
            
            const blob = new Blob([text], { type: config.mimeType });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `formatted-${Date.now()}${config.extension}`;
            link.click();
            URL.revokeObjectURL(link.href);
        }
    </script>
</body>
</html>
